<!doctype html>
<html>
<head>
<meta charset="utf-8">
<style>
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote {
margin: 0;
padding: 0;
}
body {
font-family: "Helvetica Neue", Helvetica, "Hiragino Sans GB", Arial, sans-serif;
font-size: 14px;
line-height: 21px;
color: #666;
margin: 10px 13px 10px 13px;
}
::selection {
background: rgba(0,0,0,.7);
color: #fff;
}
::-moz-selection {
background: rgba(0,0,0,.7);
color: #fff;
}
a {
color: #0069d6;
}
a:hover {
color: #0050a3;
text-decoration: none;
}
a img {
border: none;
}
p {
margin-bottom: 9px;
}
h1,
h2,
h3,
h4,
h5,
h6 {
color: #6c71c4;
line-height: 36px;
}
h1 {
margin-bottom: 18px;
font-size: 30px;
}
h2 {
font-size: 24px;
}
h3 {
font-size: 18px;
}
h4 {
font-size: 16px;
}
h5 {
font-size: 14px;
}
h6 {
font-size: 13px;
}
hr {
margin: 0 0 19px;
border: 0;
border-bottom: 1px solid #ccc;
}
blockquote {
padding: 13px 13px 21px 15px;
margin-bottom: 18px;
font-family:georgia,serif;
font-style: italic;
}
blockquote:before {
content:"\201C";
font-size:40px;
margin-left:-10px;
font-family:georgia,serif;
color:#eee;
}
blockquote p {
font-size: 14px;
font-weight: 300;
line-height: 18px;
margin-bottom: 0;
font-style: italic;
}
code, pre {
font-family: Monaco, Andale Mono, Courier New, monospace;
}
code {
background-color: #fee9cc;
color: rgba(0, 0, 0, 0.75);
padding: 1px 3px;
border-radius: 3px;
}
em {
font-style: normal;
font-weight: bold;
color: #555;
border-radius: 3px;
background-color: #fffdf7;
}
pre {
background-color: #fffdf7;
display: block;
padding: 14px;
font-size: 12px;
margin: 0 0 10px 0;
line-height: 15px;
border: 1px solid #d9d9d9;
white-space: pre-wrap;
word-wrap: break-word;
}
pre.error {
background-color: #fff2fd;
}
pre code {
background-color: transparent;
color: #bc670f;
font-size: 12px;
}
li {
margin-bottom: 5px;
}
@media screen and (min-width: 940px) {
body {
width: 900px;
margin:10px auto;
}
}

td, th {
vertical-align: top;
padding: 2px 6px;
}
h2 {
margin-bottom: 10px;
}
table ul {
margin: 0;
padding: 0 0 0 0;
list-style-type: none;
}
.required {
background-color: #ff8000;
color: white;
}
.optional {
background-color: #5fce04;
color: white;
}

td:last-child {
max-width: 300px;
}
</style>
<title>汴地吃货 API 文档</title>
</head>

<body>
<h1>汴地吃货 API 文档</h1>

<h2>API 版本：1</h2>

<pre style="line-height: 20px;"><code>GET*</code>, <code>POST*</code>: need login
<code class="required">data_type</code>: required parameter
<code class="optional">data_type</code>: optional parameter
</pre>

<hr />

<h2>数据类型</h2>

<ul>
<li><code>bool</code> 1</li>
<li><code>int</code> 31415926</li>
<li><code>str</code> "this is a string"</li>
<!--li><code>time</code> "2012-09-10 00:00:00"</li>
<li><code>date</code> "2012-09-10"</li-->  
</ul>

<h2>HTTP 状态码</h2>

<ul>
<li><code>200</code> 正常。</li>
<li><code>400</code> 请求格式错误。</li>
<li><code>403</code> 没有权限。（如未登录）</li>
<li><code>404</code> 请求的资源不存在。</li>
<li><code>422</code> 传递参数不正确。</li>
<li><code>501</code> 尚未实现此功能。</li>
<li><code>503</code> 暂时无法提供服务。</li>
<!--li><code>418</code> 我是一只咖啡壶☆</li-->  
</ul>

<h2>Error Code</h2>

<p>若返回的字典含有 <code>error_code</code>，客户端要处理错误，且不应将 <code>error_code</code> 本身暴露给用户。</p>
<p>若同时含有 <code>error</code>，要将 <code>error</code> 的内容显示给用户。</p>
<p>如遇 <code>NotLoggedIn</code>，应将用户跳转至登录界面。</p>

<hr />

<h2>/users</h2>

<table>

<thead>
<tr>
<th align="left">Address</th>
<th align="left">Method</th>
<th align="left">Parameter</th>
<th align="left">Return</th>
<th align="left">Description</th>
</tr>
</thead>

<tbody> 

<tr>
<td align="left">.json/</td>
<td align="left"><code>GET</code></td>
<td align="left">none</td>
<td align="left"><pre>
[
    {
        "id": 6,
        "name": "username1"
    },
    {
        "id": 7,
        "name": "username2"
    },
    {
        "id": 8,
        "name": "username3"
    },
    {
        "id": 9,
        "name": "username4"
    }
]
</pre></td>
<td align="left">返回用户列表。</td>
</tr>

<tr>
<td align="left">/:id.json/</td>
<td align="left"><code>GET</code></td>
<td align="left">none</td>
<td align="left"><pre>
{
    "id": 6,
    "name": "username1"
}
</pre></td>
<td align="left">返回用户信息。</td>
</tr>

<tr>
<td align="left">/signup.json/</td>
<td align="left"><code>POST</code></td>
<td align="left">
<ul>
<li><code class="required">string</code> name</li>
<li><code class="required">string</code> password</li>
<li><code class="required">string</code> passowrd_confirmation</li>
</ul>
</td>
<td align="left">
<pre>
{
    "id": 9,
    "name": "username4"
}
</pre>
<pre title="404" class="error">
{
    "name": [
        "has already been taken"
    ],
    "password": [
        "Missing password"
    ]
}
</pre>
</td>
<td align="left">注册用户</td>
</tr>

<tr>
<td align="left">/login.json/</td>
<td align="left"><code>POST</code></td>
<td align="left">
<ul>
<li><code class="required">string</code> name</li>
<li><code class="required">string</code> password</li>
</ul>
</td>
<td align="left">
<ul>
  <li><code>0</code> success</li>
</ul>
<pre title="404" class="error">
{
    "error": "Invalid user/password combination"
}</pre>
</td>

<td align="left">登录用户</td>

</tr>
<tr>
<td align="left">/logout.json/</td>
<td align="left"><code>DELETE</code></td>
<td align="left">none</td>
<td align="left">
<ul>
  <li><code>0</code> success</li>
</ul>
<pre title="404" class="error">
{
    "error": "NotLoggedIn"
}</pre>
</td>
<td align="left">登出用户</td>
</tr>

</tbody>
</table>

<hr />

<h2>/restaurants</h2>

<table>

<thead>
<tr>
<th align="left">Address</th>
<th align="left">Method</th>
<th align="left">Parameter</th>
<th align="left">Return</th>
<th align="left">Description</th>
</tr>
</thead>

<tbody> 

<tr>
<td align="left">.json/</td>
<td align="left"><code>GET</code></td>
<td align="left">none</td>
<td align="left"><pre>
[
    {
        "busy": "忙死了",
        "evaluation": "3.0",
        "id": 1,
        "image_url": "http://photo.8j.com/2/07/03/30/8/1-07033014076604018.jpg",
        "name": "农园",
        "recommendations": "麻辣香锅, 煲汤"
    },
    {
        "busy": "不忙",
        "evaluation": "5",
        "id": 2,
        "image_url": "http://img.blog.163.com/photo/PDETsugPWr_9KqVlFqHyaA==/2852185939009525547.jpg",
        "name": "康博斯",
        "recommendations": "鸡腿饭"
    }
]
</pre></td>
<td align="left">返回支持的食堂列表。</td>
</tr>

<tr>
<td align="left">/:id.json/</td>
<td align="left"><code>GET</code></td>
<td align="left">none</td>
<td align="left">
<pre>
{
    "average_cost": 5.5,
    "busy": "忙死了",
    "category": "大众",
    "description": "农园这个地方真不错，到处的饭菜都是自己选的",
    "evaluation": "3.0",
    "id": 1,
    "image_url": "http://photo.8j.com/2/07/03/30/8/1-07033014076604018.jpg",
    "info_summary": "离教学楼最近的地方",
    "info_tel": "62750000",
    "info_time": "11:30-13:00 17:00-19:00",
    "location_latitude": 40,
    "location_longitude": 120,
    "location_name": "二教西侧",
    "location_zone": "近教学楼",
    "name": "农园",
    "recommendations": "麻辣香锅, 煲汤",
    "dishesID": [
        1,
        2
    ]
}
</pre>
<pre title="404" class="error">{"error_code": "RestaurantNotFound"}</pre>
</td>
<td align="left">返回 <code>id</code> 食堂的详细信息。</td>
</tr>

<tr>
<td align="left">/:id/comment.json/</td>
<td align="left"><code>GET</code></td>
<td align="left">
<ul>
<li><code class="optional">int</code> start</li>
</ul>
</td>
<td align="left"><pre>[
  {
    "id": 2312,
    "restaurant_id": 1,
    "user_id": 1,
    "user_name": "ZongZi",
    "evaluation": 4.0,
    "cost": 5.5,
    "time": "2012-07-07 10:03:31",
    "content": "这里的菜太难吃了",
  },
  {
    "id": 2313,
    "restaurant_id": 1,
    "user_id": 79,
    "user_name": "Who",
    "evaluation": 4.33
    "cost": 7.5,
    "time": "2012-07-08 19:03:31",
    "content": "不知道有什么好吃的。",
  }
]</pre>
<pre title="404" class="error">{"error_code": "RestaurantNotFound"}</pre>
</td>
<td align="left">返回 <code>id</code> 食堂最近 10 条评论，从第 <code>start</code> 条开始（默认为 0）。<br />若客户端在同一页面加载更多评论，须注意新的评论导致的重复。</td>
</tr>

</tbody>
</table>

<hr />

<h2>/dishes</h2>

<table>

<thead>
<tr>
<th align="left">Address</th>
<th align="left">Method</th>
<th align="left">Parameter</th>
<th align="left">Return</th>
<th align="left">Description</th>
</tr>
</thead>

<tr>
<td align="left">.json/</td>
<td align="left"><code>GET</code></td>
<td align="left">none</td>
<td align="left">
<pre>
[
    {
        "category": "好吃的",
        "cost": 5,
        "description": "太好吃了",
        "evaluation": 10,
        "id": 1,
        "image_url": "http://sms.jmcatv.com.cn/09duanwu/images/2008528104427759.jpg",
        "name": "粽子",
        "restaurant_id": 1
    },
    {
        "category": "饭",
        "cost": 6,
        "description": "顾名思义就是咖喱牛肉放在铁板上",
        "evaluation": 8,
        "id": 2,
        "image_url": "http://i2.dpfile.com/2011-07-08/8599217_b.jpg",
        "name": "咖喱牛肉铁板饭",
        "restaurant_id": 1
    },
    {
        "category": "盖浇饭",
        "cost": 7,
        "description": "好吃的鱼香肉丝盖浇饭",
        "evaluation": 9,
        "id": 4,
        "image_url": "http://i1.dpfile.com/2009-06-07/2147233_b.jpg(700x700)/thumb.jpg",
        "name": "鱼香肉丝饭",
        "restaurant_id": 2
    }
]
</pre></td>
<td align="left">返回支持的菜肴列表。</td>
</tr>

<tr>
<td align="left">/:id.json/</td>
<td align="left"><code>GET</code></td>
<td align="left">none</td>
<td align="left">
<pre>
{
    "category": "好吃的",
    "cost": 5,
    "description": "太好吃了",
    "evaluation": 10,
    "id": 1,
    "image_url": "http://sms.jmcatv.com.cn/09duanwu/images/2008528104427759.jpg",
    "name": "粽子",
    "restaurant_id": 1
}
</pre>
<pre title="404" class="error">{"error_code": "DishNotFound"}</pre>
</td>
<td align="left">返回 <code>id</code> 菜肴的详细信息。</td>
</tr>

<!--tr>
<td align="left">/:id/comment.json/</td>
<td align="left"><code>GET</code></td>
<td align="left">
<ul>
<li><code class="optional">int</code> start</li>
</ul>
</td>
<td align="left"><pre>[
  {
    "id": 2353,
    "dish_id": 1,
    "user_id": 1,
    "user_name": "ZongZi",
    "evaluation": 5,
    "time": "2012-07-08 19:03:30",
    "content": "这个不好吃",
  },
  {
    "id": 2313,
    "dish_id": 2,
    "user_id": 79,
    "user_name": "Who",
    "evaluation": 9,
    "time": "2012-07-08 19:03:31",
    "content": "特别好吃",
  }
]</pre>
<pre title="404" class="error">{"error_code": "DishNotFound"}</pre>
</td>
<td align="left">返回 <code>id</code> 菜肴最近 10 条评论，从第 <code>start</code> 条开始（默认为 0）。<br />若客户端在同一页面加载更多评论，须注意新的评论导致的重复。</td>
</tr-->

</tbody>
</table>

<hr />

</body>
</html>

